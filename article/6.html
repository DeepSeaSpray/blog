<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>爆炸</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><h1><a id="_0"></a>爆炸</h1>
<blockquote>
<p>2023年10月24日 / 信息学，多校联训，题解</p>
</blockquote>
<p>题目链接同上文。</p>
<h2><a id="_6"></a>题目概述</h2>
<p>有一个<span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>×</mo><mi>m</mi></mrow><annotation encoding="application/x-tex">n \times m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.6667em; vertical-align: -0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span>地图，上面的每一个格子可能是炸弹，空地，或者水晶。</p>
<p>现在你可以选择一个炸弹向其所在的这一行或这一列引爆，接着同行或同列的炸弹会被继续将其所在的列或行引爆（引爆方向取决于与引爆方式，如果其在行被引爆，那么它将引爆其所在的列，反之同理），产生连锁反应，直到没有炸弹被引爆为止，其中可能会炸毁很多水晶，现在你要找到一种引爆方式，使得可以炸毁最多的水晶。</p>
<h2><a id="_12"></a>解法分析</h2>
<p>我们对于每一个炸弹，考虑向其左边，上面的第一个炸弹连边。我们注意到如果联通块构成了一个环，那么所有炸弹涉及的行和列都会被炸。如果没有环，那么必定有一个炸弹所在的行或列没有被炸。</p>
<pre><code class="prism language-plaintext">k..k
bkbk
k.k.
bkbk
</code></pre>
<p>像上面这张图，行1、3，列1、3都可以被炸到。</p>
<pre><code class="prism language-plaintext">kkb
...
b.b
</code></pre>
<p>而这张图，要么行1没有没炸，要么列1没有被炸。</p>
<p>有了上面两张图的辅助，你一定已经理解了做法。</p>
<h2><a id="_35"></a>具体实现</h2>
<p>首先，每一行或列都只会出现在一个联通块中，这是很显然的。在预处理每一行或列的和的前提下，我们还要对于交叉的部分去重，时间复杂度是<span class="katex--inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1.0641em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>的，对于没有环的连通块，我们还要算出连通块的开头的行或列（就是不能被别的炸弹引爆的行或列）。注意这一部分也需要去重，因为虽然这一部分的水晶没有被该炸弹引爆，但是有可能被别的炸弹引爆。</p>
<p><a href="/blog/cut/6/1.html">查看代码</a></p>
<h2><a id="_41"></a>后记</h2>
<p>警醒自己：”能不能改掉甩笔的习惯。“</p>
</div>
</body>

</html>
