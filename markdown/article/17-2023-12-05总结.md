# 17-2023-12-05总结

> 2023-12-05 / 信息学, 校内模拟赛, 总结

[回到首页](/index.html)

## 前言

校内模拟赛, 题目是`ARC121`的`A,B,D,E`题, 评级不高, 但思维难度较高.

## [ARC121A] 2nd Greatest Distance

### 题意概述

 有$n$个点, 求出每一对点的契比雪夫距离(即$dis(i,j)=\max(|x_i-x_j|,|y_i-y_j|)$)组成的序列降序排序后的 第二个数.

### 做法分析

首先两维坐标可以分开考虑, 将其排序然后取出$(1,n),(2,n),(1,n-1)$这三个点对, 再排序, 注意判断第一个和第二个可不可以同时取到即可.

[查看代码](https://atcoder.jp/contests/arc121/submissions/48251681)

## [ARC121B] RGB Matching

### 题意概述

有$2n$只狗, 每个狗有一个颜色$c_i$, 为`R,G,B`之一, 还有一个数$a_i$.

你需要将狗两两配对, 每一个配对$(i,j)$的代价为$[c_i \not = c_j] \times |a_i - a_j|$.

求最小代价和.

### 做法分析

首先, 我们可以分析出一共只有两种可能的情况:

- 每一种颜色都有偶数个
- 其中两种颜色有奇数个, 剩下一种有偶数个

对于第一种情况, 答案显然为$0$. 对于第二种情况, 我们可以直接匹配, 也可以从剩下的一种颜色中拆出两只分别匹配, 注意选出的两只不能是相同的.

实现上可以采用二分查找, 也可以直接使用双指针预处理, 常数略小.

[查看代码](https://atcoder.jp/contests/arc121/submissions/48251661)

## [ARC121D] 1 or 2

### 题意概述

有$n$块糖果, 每个糖果有一个甜度$a_i$, 每一次你可以单独吃掉一块糖果, 也可以将两块糖果一起吃掉, 然后将每一次所吃的糖果的甜度值写在黑板上.

你需要使黑板上的极差最小.

### 做法分析

首先, 我们在序列中加入一些$0$, 这样就可以一次吃一块或者两块的问题转换为一次吃两块的问题.

如何解决此问题, 考虑微扰法, 不妨设序列中有$4$个元素$a \leq b \leq c \leq d$. 有如下三种匹配方式, 极差分别为:

- $(a,b),(c,d)$: $|(a+b)-(c+d)|=|-a-b+c+d|=-a-b+c+d$
- $(a,c),(b,d)$: $|(a+c)-(b+d)|=|-a+b-c+d|=-a+b-c+d$
- $(a,d),(b,c)$: $|(a+d)-(b+c)|= |+a-b-c+d|$

设$x=b-a, y=d-c$. 显然有$x>0,y>0$.

第一个显然比第二个小, 剩下两个分别为:

- $x+y$
- $|-x+y|$

所以第中配对方式更优(不妨分类讨论$x<y$等情况).

实现上只需要枚举加入多少个$0$即可, 如果每一次都排序可能太慢, 发现只要刚开始排序一次, 然后每一次在固定位置插入$0$即可.

[查看代码](https://atcoder.jp/contests/arc121/submissions/48249326)

## [ARC121E] Directed Tree

### 题意概述

有一颗$n$个节点的有向树, 其父亲可以走到儿子节点, 现在你需要找出有多少个排列$A$使得$a_i$无法到达$i$. 

### 做法分析

换句话说, 每一个位置上不能填它的祖先. 又换句话说, 每一个节点不能填到它子树中(除了自己)的位置上.

我们的目标是求出恰好有$0$个位置不合法(也就是所有的位置都合法), 但是一般恰好的问题都不太好解决, 我们考虑$g(i)$表示选定(换句话说**至少**)$i$个位置不合法的方案数, 然后根据容斥原理即可求出答案:
$$
ans = \sum_{i=0}^n (-1)^i g(i)
$$
考虑树形DP, $f(u,i)$表示$u$的子树中选定$i$个位置不合法(暂不考虑其他位置的选择)的方案数.如果$v \in son_u$. 考虑类似树形背包式转移:
$$
f(u,i+j) = f(u,i) \times f(v,j)
$$
更新完所有的儿子之后考虑自己的贡献.
$$
f(u,i) = f(u,i-1) \times ((sz_i-1)-(i-1))
$$
$u$填在除了自己的子树上, 当然, 有$(i-1)$个点已经被填了.

最后要考虑其他位置的填法, 所以:
$$
g(i) = f(1,i) \times (n-i)!
$$

### 技巧小结

对于恰好类的技术问题, 往往可以用容斥原理转换成至多, 至少之类的问题, 然后再用DP, 组合数学等方法解决即可.

[查看代码](https://atcoder.jp/contests/arc121/submissions/48250486)

## 总结

考试情况仍然不是非常的满意, 第一遍没有理清思路后来不断挑错改了很多遍, 要改, 争取一遍过. 要注意很多简化题目的技巧, 不要直接开始乱撞.
